<div id="js_debug"></div>

<p>ROOT 
	<input type="button" onclick="imagelibDisplayAllFolder(true);" value="+" />
	<input type="button" onclick="imagelibDisplayAllFolder(false);" value="-" />
</p>
<div id="folder_list">
{assign var='prevlevel' value=0}
{assign var='prevkey' value=0}
{assign var='prevlast' value=1}

{foreach from=$reading key=k item=f}

	{if $f.level < $prevlevel}
	{section name="stuff" loop=($prevlevel - $f.level)}
		</div>
	{/section}
	{elseif $f.level > $prevlevel}
		<div id="folder_{$prevkey}" class="folder {if !$prevlast}folder_bck{/if}">
	{/if}
	<p class="element{if $f.is_last} last{/if}" onclick="{if $f.is_dir}imagelibToggleFolder('{$k}');{else}imagelibLoadImage('{$f.path}/{$f.name}');{/if}">
		&nbsp;&nbsp;&nbsp;
	 {if $f.is_dir}
	 	<img src="{$COMMON}images/icons/folder.png" />
		{assign var='prevkey' value=$k}
	 {/if}
	 {$f.name}
	 </p>
	 {assign var='prevlevel' value=$f.level}
	 {assign var='prevlast' value=$f.is_last}
 
 	
{/foreach}
</div>
